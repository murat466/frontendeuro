(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[292],{2925:(e,t,l)=>{Promise.resolve().then(l.bind(l,4642))},4642:(e,t,l)=>{"use strict";l.d(t,{default:()=>s});var a=l(5155),c=l(2115),i=l(2013);let s=e=>{let{categoryId:t,excludeId:l,limit:s,variant:r="default",showImage:o=!0,onArticleClick:n,className:d=""}=e,[g,h]=(0,c.useState)([]),[m,x]=(0,c.useState)(!0),[p,f]=(0,c.useState)(null),u=null!=t?t:void 0,v=null!=l?l:void 0,w=null!=s?s:void 0;return((0,c.useEffect)(()=>{(async()=>{try{if(x(!0),f(null),u)try{console.log("ArticlesList - Trying categories-with-articles endpoint for categoryId:",u);let e="/api/categories-with-articles",t=new URLSearchParams;t.append("categoryId",u.toString()),v&&t.append("excludeId",v),e+="?".concat(t.toString());let l=await fetch(e);if(l.ok){let e=await l.json();console.log("ArticlesList - Success with categories-with-articles:",e.length);let t=w?e.slice(0,w):e;h(t);return}console.log("ArticlesList - Categories-with-articles failed, falling back to regular articles API")}catch(e){console.log("ArticlesList - Categories-with-articles error, falling back:",e)}let e="/api/articles",t=new URLSearchParams;u&&t.append("categoryId",u.toString()),v&&t.append("excludeId",v),t.toString()&&(e+="?".concat(t.toString())),console.log("ArticlesList - Fetching from fallback:",e);let l=await fetch(e);if(!l.ok)throw Error("Failed to fetch articles");let a=await l.json();v&&!u&&(a=a.filter(e=>e.id!==v)),console.log("ArticlesList - Received articles:",a.length);let c=w?a.slice(0,w):a;console.log("ArticlesList - After limit:",c.length),h(c)}catch(e){console.error("Failed to fetch articles",e),f("فشل في تحميل المقالات")}finally{x(!1)}})()},[u,v,w]),m)?(0,a.jsx)("div",{className:"text-center py-4 ".concat(d),children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"جاري التحميل..."})}):p?(0,a.jsx)("div",{className:"text-center py-4 ".concat(d),children:(0,a.jsx)("div",{className:"text-sm text-red-500",children:p})}):0===g.length?(0,a.jsxs)("div",{className:"text-center py-4 ".concat(d),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:u?"لا توجد مقالات في هذا القسم":"لا توجد مقالات"}),u&&(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"جاري البحث عن مقالات أخرى..."})]}):"dropdown"===r?(0,a.jsx)("div",{className:d,children:g.map(e=>(0,a.jsx)(i.A,{article:e,variant:"dropdown",showImage:o,onArticleClick:n},e.id))}):"compact"===r?(0,a.jsx)("div",{className:"space-y-3 ".concat(d),children:g.map(e=>(0,a.jsx)(i.A,{article:e,variant:"compact",showImage:o,onArticleClick:n},e.id))}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 ".concat(d),children:g.map(e=>(0,a.jsx)(i.A,{article:e,variant:"default",showImage:o,onArticleClick:n},e.id))})}}},e=>{var t=t=>e(e.s=t);e.O(0,[512,173,565,759,441,517,358],()=>t(2925)),_N_E=e.O()}]);