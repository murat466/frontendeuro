(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7439:(e,t,a)=>{Promise.resolve().then(a.bind(a,8668))},6046:(e,t,a)=>{"use strict";var r=a(6658);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},366:(e,t,a)=>{"use strict";a.d(t,{GE:()=>n,WT:()=>h,Zx:()=>d,bW:()=>o});var r=a(2651),s=a(9102),i=a.n(s);let l="https://eennback-002-site1.atempurl.com",c=new(i()).Agent({rejectUnauthorized:!1});r.A.defaults.httpsAgent=c,r.A.defaults.timeout=1e4;let n=async()=>{try{return(await r.A.get("".concat(l,"/api/Articles"))).data}catch(e){if(console.error("Error fetching articles:",e),r.A.isAxiosError(e)){if("ECONNREFUSED"===e.code)throw Error("Unable to connect to the API server. Please make sure the backend server is running on port 7065.");if(e.response)throw Error("API Error: ".concat(e.response.status," - ").concat(e.response.statusText));if(e.request)throw Error("Network Error: Unable to reach the API server. Please check your connection.")}throw e}},o=async()=>{try{return(await r.A.get("".concat(l,"/api/Categories"))).data}catch(e){if(console.error("Error fetching categories:",e),r.A.isAxiosError(e)){if("ECONNREFUSED"===e.code)throw Error("Unable to connect to the API server. Please make sure the backend server is running on port 7065.");if(e.response)throw Error("API Error: ".concat(e.response.status," - ").concat(e.response.statusText));if(e.request)throw Error("Network Error: Unable to reach the API server. Please check your connection.")}throw e}},d={getAll:()=>o(),getById:async e=>{try{return(await r.A.get("".concat(l,"/api/Categories/").concat(e))).data}catch(e){throw console.error("Error fetching category:",e),e}}},h={getAll:()=>n(),getById:async e=>{try{return(await r.A.get("".concat(l,"/api/Articles/").concat(e))).data}catch(e){throw console.error("Error fetching article:",e),e}},getByCategory:async e=>{try{return(await r.A.get("".concat(l,"/api/Articles/category/").concat(e))).data}catch(e){throw console.error("Error fetching articles by category:",e),e}}}},8668:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),s=a(5565),i=a(3640),l=a(2115),c=a(6046),n=a(366),o=a(5620);function d(){let e=(0,c.useRouter)(),[t,a]=(0,l.useState)([]),[d,h]=(0,l.useState)(!0),[m,x]=(0,l.useState)(void 0),[g,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{h(!0);let[e,t]=await Promise.all([(0,n.GE)(),n.Zx.getAll()]),r=e.filter(e=>e.isPublished).sort((e,t)=>new Date(t.createdDate).getTime()-new Date(e.createdDate).getTime());a(r),u(t)}catch(e){console.error("Error fetching articles or categories:",e)}finally{h(!1)}})()},[]);let v=t.find(e=>5===e.upperArticleId),p=t.find(e=>3===e.upperArticleId),f=t.find(e=>4===e.upperArticleId),j=t.find(e=>1===e.upperArticleId),b=t.find(e=>2===e.upperArticleId),w=[null==v?void 0:v.id,null==p?void 0:p.id,null==f?void 0:f.id,null==j?void 0:j.id,null==b?void 0:b.id].filter(Boolean),N=t.filter(e=>!w.includes(e.id)),y=[j||N[0],b||N[1]].filter(Boolean),A=[p||N[2],f||N[3]].filter(Boolean),k=e=>g.find(t=>t.id===e.categoryId),E=t=>{let a=k(t),r=(0,o.dm)(t,a);e.push(r)};return((0,l.useEffect)(()=>{let e;let t=t=>{x(t),e=t};return v&&v.imagePath?/^https?:\/\//.test(v.imagePath)||v.imagePath.startsWith("data:")?t((0,i.VG)(v.imagePath)):(async()=>{try{let e=(0,i.VG)(v.imagePath)||"",a=await fetch(e);if(!a.ok)throw Error("Image fetch failed");let r=await a.blob(),s=URL.createObjectURL(r);t(s)}catch(e){t(void 0)}})():t(void 0),()=>{e&&URL.revokeObjectURL(e)}},[v]),d)?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[500px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primaryOther"})}):0===t.length?null:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"grid lg:grid-cols-12 gap-6 min-h-[500px]",children:[y.length>0&&(0,r.jsx)("div",{className:"lg:col-span-3 space-y-4 h-full",children:y.map((e,t)=>(0,r.jsxs)("div",{className:"relative group cursor-pointer bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 h-[242px]",onClick:()=>E(e),children:[(0,r.jsxs)("div",{className:"relative h-full",children:[(0,i.VG)(e.imagePath)&&(0,r.jsx)(s.default,{src:(0,i.VG)(e.imagePath),alt:e.articleTitle,fill:!0,className:"object-cover",unoptimized:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,r.jsx)("h3",{className:"text-white font-bold text-lg leading-tight text-right text-shadow-outline",children:e.articleTitle})})]},"left-".concat(e.id,"-").concat(t)))}),v&&(0,r.jsx)("div",{className:"lg:col-span-6",children:(0,r.jsx)("div",{className:"relative group cursor-pointer bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 h-full",onClick:()=>v&&E(v),children:(0,r.jsxs)("div",{className:"relative h-full min-h-[500px]",children:[m&&(0,r.jsx)(s.default,{src:m,alt:(null==v?void 0:v.articleTitle)||"",fill:!0,className:"object-cover",unoptimized:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h2",{className:"text-white font-bold text-2xl md:text-3xl leading-tight mb-3 text-right text-shadow-outline",children:null==v?void 0:v.articleTitle}),(0,r.jsx)("p",{className:"text-gray-200 text-base leading-relaxed text-right text-shadow-outline",children:null==v?void 0:v.articleSummary})]})})]})})}),A.length>0&&(0,r.jsx)("div",{className:"lg:col-span-3 space-y-4 h-full",children:A.map((e,t)=>(0,r.jsxs)("div",{className:"relative group cursor-pointer bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 h-[242px]",onClick:()=>E(e),children:[(0,r.jsxs)("div",{className:"relative h-full",children:[(0,i.VG)(e.imagePath)&&(0,r.jsx)(s.default,{src:(0,i.VG)(e.imagePath),alt:e.articleTitle,fill:!0,className:"object-cover",unoptimized:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,r.jsx)("h3",{className:"text-white font-bold text-lg leading-tight text-right text-shadow-outline",children:e.articleTitle})})]},"right-".concat(e.id,"-").concat(t)))})]}),t.length>0&&(0,r.jsx)("div",{className:"lg:hidden grid grid-cols-1 gap-4 mt-6",children:t.slice(0,5).map((e,t)=>(0,r.jsxs)("div",{className:"relative group cursor-pointer bg-white rounded-lg shadow-md overflow-hidden",onClick:()=>E(e),children:[(0,r.jsxs)("div",{className:"relative h-48",children:[(0,i.VG)(e.imagePath)&&(0,r.jsx)(s.default,{src:(0,i.VG)(e.imagePath),alt:e.articleTitle,fill:!0,className:"object-cover",unoptimized:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,r.jsx)("h3",{className:"text-white font-bold text-lg leading-tight text-right text-shadow-outline",children:e.articleTitle})})]},"mobile-".concat(e.id||t)))})]})}var h=a(8173),m=a.n(h),x=a(5297);let g=e=>{let{categoryFilter:t,limit:a=6}=e,[c,o]=(0,l.useState)([]),[d,h]=(0,l.useState)(!0),[g,u]=(0,l.useState)({}),v=(0,l.useRef)({});return((0,l.useEffect)(()=>{let e=async()=>{let e={};await Promise.all(c.map(async t=>{let a=t.imagePath;if(a&&a.startsWith("https://eennback-002-site1.atempurl.com")&&!v.current[a])try{let t=(0,i.Lh)(a),r=await fetch(t);if(r.ok){let t=await r.blob();e[a]=URL.createObjectURL(t),v.current[a]=!0}}catch(e){}})),Object.keys(e).length>0&&u(t=>({...t,...e}))};c.length>0&&e()},[c]),(0,l.useEffect)(()=>{(async()=>{try{h(!0),await (0,n.bW)();let e=(t?await n.WT.getByCategory(t):await n.WT.getAll()).filter(e=>e.isPublished).sort((e,t)=>new Date(t.createdDate).getTime()-new Date(e.createdDate).getTime());o(e)}catch(e){console.error("Error fetching data:",e)}finally{h(!1)}})()},[t]),d)?(0,r.jsx)("div",{className:"container mx-auto py-4",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"bg-gray-200 animate-pulse rounded-lg h-48"},t))})}):(0,r.jsxs)("div",{className:"container mx-auto py-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:c.slice(0,a).map(e=>(0,r.jsx)(m(),{href:"/".concat(e.categoryId,"/").concat(e.id),className:"block",children:(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden transition-transform hover:scale-105 cursor-pointer",children:e.imagePath&&""!==e.imagePath.trim()?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-full h-[300px] relative group",children:[(0,r.jsx)(s.default,{src:g[e.imagePath]?g[e.imagePath]:e.imagePath,alt:e.articleTitle,fill:!0,className:"object-cover rounded-t-xl",style:{objectPosition:"center"},sizes:"(max-width: 768px) 100vw, 50vw",priority:!1,loader:e=>{let{src:t}=e;return t},unoptimized:!!g[e.imagePath]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,r.jsx)("h3",{className:"text-white font-bold text-lg md:text-xl leading-tight text-right article-title-shadow",children:e.articleTitle})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 mb-3 text-gray-600",children:[(0,r.jsx)("span",{className:"text-sm",children:(0,x.A)(new Date(e.createdDate),{showHijri:!1,showGregorian:!0})}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})})]}),(0,r.jsx)("p",{className:"text-gray-700 text-sm text-right line-clamp-3 leading-relaxed",children:e.articleSummary})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-full h-[300px] bg-gray-100 flex items-center justify-center rounded-t-xl relative",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"لا توجد صورة"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,r.jsx)("h3",{className:"text-white font-bold text-lg md:text-xl leading-tight text-right article-title-shadow",children:e.articleTitle})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 mb-3 text-gray-600",children:[(0,r.jsx)("span",{className:"text-sm",children:(0,x.A)(new Date(e.createdDate),{showHijri:!1,showGregorian:!0})}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})})]}),(0,r.jsx)("p",{className:"text-gray-700 text-sm text-right line-clamp-3 leading-relaxed",children:e.articleSummary})]})]})})},e.id))}),0===c.length&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"لا توجد مقالات متاحة"})})]})};var u=a(2013);let v=e=>{let{className:t=""}=e,[a,s]=(0,l.useState)([]),[i,c]=(0,l.useState)(!0),[n,o]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{c(!0),o(null),console.log("LastNews - Fetching latest 9 articles from all categories");let e=await fetch("/api/articles");if(!e.ok)throw Error("Failed to fetch articles");let t=(await e.json()).filter(e=>e.isPublished).sort((e,t)=>new Date(t.createdDate).getTime()-new Date(e.createdDate).getTime()).slice(0,9);console.log("LastNews - Received latest articles:",t.length),s(t)}catch(e){console.error("Failed to fetch latest articles",e),o("فشل في تحميل آخر الأخبار")}finally{c(!1)}})()},[]),i)?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 ".concat(t),children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-right mb-4 border-b-2 border-blue-500 pb-2",children:"آخر الأخبار"}),(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"جاري التحميل..."})})]}):n?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 ".concat(t),children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-right mb-4 border-b-2 border-blue-500 pb-2",children:"آخر الأخبار"}),(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("div",{className:"text-sm text-red-500",children:n})})]}):0===a.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 ".concat(t),children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-right mb-4 border-b-2 border-blue-500 pb-2",children:"آخر الأخبار"}),(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"لا توجد أخبار متاحة حالياً"})})]}):(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col min-h-[500px] ".concat(t),children:(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("div",{className:"space-y-2",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"bg-gray-50 hover:bg-blue-50 rounded-lg p-2 transition-colors duration-200",children:(0,r.jsx)(u.A,{article:e,variant:"compact",showImage:!0})}),t<a.length-1&&(0,r.jsx)("div",{className:"border-b border-gray-200 mt-2"})]},e.id))})})})})},p=()=>{let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)(!0),[i,c]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{s(!0),c(null);let e=await n.Zx.getAll();t(e)}catch(e){console.error("Error fetching categories:",e),c("لايوجد اتصال مع قاعدة البيانات")}finally{s(!1)}})()},[]);let o=t=>e.find(e=>e.name===t),d=e=>{let{Name:t}=e,a=o(t);return a&&a.isActivated?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"container mx-auto flex items-center mb-6",children:[(0,r.jsx)("div",{className:"text-primaryOther",children:(0,r.jsx)("p",{children:a.name})}),(0,r.jsx)("div",{className:"w-96 h-1 mx-auto my-4 bg-primaryOther border-0 rounded-sm md:my-10"})]}),(0,r.jsx)("div",{className:"container mx-auto mb-8",children:(0,r.jsx)(g,{categoryFilter:a.id,limit:4})})]}):null};if(a)return(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primaryOther"})})});if(i)return(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("p",{className:"text-red-500",children:i})})});let h=e.filter(e=>e.isActivated);return 0===h.length?(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"لا توجد أقسام متاحة"})})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container mx-auto py-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 lg:gap-6",children:[(0,r.jsx)("div",{className:"col-span-12 lg:col-span-9",children:h.map(e=>(0,r.jsx)(d,{Name:e.name},e.id))}),(0,r.jsxs)("div",{className:"col-span-12 lg:col-span-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,r.jsx)("div",{className:"w-12 sm:w-16 h-1 bg-primaryOther border-0 rounded-sm"}),(0,r.jsx)("div",{className:"text-primaryOther mx-2",children:(0,r.jsx)("p",{className:"text-xs sm:text-sm font-semibold",children:"آخر الأخبار"})}),(0,r.jsx)("div",{className:"w-12 sm:w-16 h-1 bg-primaryOther border-0 rounded-sm"})]}),(0,r.jsx)("div",{className:"sticky top-4",children:(0,r.jsx)(v,{})})]})]})})})};function f(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{}),(0,r.jsx)(p,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[512,173,565,382,759,441,517,358],()=>t(7439)),_N_E=e.O()}]);