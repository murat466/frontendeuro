(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{465:(e,s,a)=>{Promise.resolve().then(a.bind(a,4683))},4683:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var l=a(5155),t=a(2115),r=a(5565),i=a(8173),c=a.n(i);let d=e=>{let{article:s,variant:a}=e,t=e=>new Date(e).toLocaleDateString("ar-SA",{day:"numeric",month:"short",year:"numeric"});return"featured"===a?(0,l.jsx)(c(),{href:"/article/".concat(s.id),className:"group block h-full",children:(0,l.jsx)("div",{className:"relative h-full min-h-[400px]",children:(0,l.jsxs)("div",{className:"relative overflow-hidden rounded-lg h-full",children:[(0,l.jsx)(r.default,{src:s.imagePath||"/img/1.jpg",alt:s.articleTitle,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),(0,l.jsx)("div",{className:"absolute inset-0 article-card-overlay"}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-3 line-clamp-2 article-title-featured",children:s.articleTitle}),(0,l.jsx)("div",{className:"flex items-center justify-between text-xs text-gray-300",children:(0,l.jsx)("span",{children:t(s.createdDate)})})]})]})})}):"compact"===a?(0,l.jsx)(c(),{href:"/article/".concat(s.id),className:"group block",children:(0,l.jsxs)("div",{className:"flex gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-20 h-16 relative overflow-hidden rounded",children:(0,l.jsx)(r.default,{src:s.imagePath||"/img/1.jpg",alt:s.articleTitle,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"})})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h4",{className:"text-sm font-semibold line-clamp-2 mb-1 group-hover:text-primaryOther transition-colors leading-tight",children:s.articleTitle}),(0,l.jsx)("div",{className:"text-xs text-gray-500 flex items-center",children:(0,l.jsx)("span",{children:t(s.createdDate)})})]})]})}):(0,l.jsx)(c(),{href:"/article/".concat(s.id),className:"group block h-full",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden category-card h-full flex flex-col",children:[(0,l.jsx)("div",{className:"aspect-[4/3] relative overflow-hidden",children:(0,l.jsx)(r.default,{src:s.imagePath||"/img/1.jpg",alt:s.articleTitle,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,l.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,l.jsx)("h4",{className:"font-semibold text-base line-clamp-2 mb-2 group-hover:text-primaryOther transition-colors article-title-standard flex-1",children:s.articleTitle}),(0,l.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:s.articleSummary}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 flex items-center justify-between mt-auto",children:[(0,l.jsx)("span",{children:t(s.createdDate)}),(0,l.jsx)("div",{className:"w-1 h-1 bg-primaryOther rounded-full"})]})]})]})})},n=e=>{let{category:s,maxArticles:a=6,showViewAll:t=!0}=e,r=s.articles.slice(0,a);return s.articles&&0!==s.articles.length?(0,l.jsxs)("div",{className:"bg-white rounded-lg category-card overflow-hidden mb-8",dir:"rtl",children:[(0,l.jsx)("div",{className:"bg-primaryOther px-6 py-4",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-white font-bold text-xl category-title",children:s.name}),t&&(0,l.jsxs)(c(),{href:"/category/".concat(s.categorySlug),className:"text-white text-sm hover:underline flex items-center",children:["المزيد",(0,l.jsx)("span",{className:"mr-2 text-xs",children:"←"})]})]})}),(0,l.jsxs)("div",{className:"p-6",children:[r.length>=3?(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsx)(d,{article:r[0],variant:"featured"})}),(0,l.jsx)("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:r.slice(1,5).map(e=>(0,l.jsx)(d,{article:e,variant:"standard"},e.id))})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,l.jsx)(d,{article:e,variant:"standard"},e.id))}),r.length>5&&(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6 pt-6 border-t border-gray-100",children:r.slice(5).map(e=>(0,l.jsx)(d,{article:e,variant:"compact"},e.id))})]})]}):null},x=e=>{let{categories:s,maxArticlesPerCategory:a=6,showViewAllLinks:t=!0}=e,r=s.filter(e=>e.articles&&e.articles.length>0);return 0===r.length?(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-gray-500 text-lg",children:"لا توجد مقالات متاحة حالياً"})}):(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsx)("div",{className:"space-y-8",children:r.map(e=>(0,l.jsx)(n,{category:e,maxArticles:a,showViewAll:t},e.id))})})},o=()=>{let[e,s]=(0,t.useState)([]),[a,r]=(0,t.useState)(!0),[i,c]=(0,t.useState)(null);return((0,t.useEffect)(()=>{(async()=>{try{r(!0);let e=await fetch("/api/categories-with-articles");if(!e.ok)throw Error("فشل في تحميل التصنيفات");let a=await e.json();s(a)}catch(e){c(e instanceof Error?e.message:"حدث خطأ غير متوقع"),console.error("Error fetching categories:",e)}finally{r(!1)}})()},[]),a)?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primaryOther"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"جاري تحميل التصنيفات..."})]})})}):i?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-red-500 text-lg mb-4",children:"❌ خطأ"}),(0,l.jsx)("p",{className:"text-gray-600",children:i}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-primaryOther text-white rounded hover:bg-opacity-90 transition-colors",children:"إعادة المحاولة"})]})})}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 text-right",children:"جميع التصنيفات"}),(0,l.jsx)("p",{className:"mt-2 text-gray-600 text-right",children:"استكشف المقالات حسب التصنيف"})]})}),(0,l.jsx)(x,{categories:e,maxArticlesPerCategory:6,showViewAllLinks:!0})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[173,565,441,517,358],()=>s(465)),_N_E=e.O()}]);