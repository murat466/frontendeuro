"use strict";(()=>{var e={};e.id=719,e.ids=[719],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5591:e=>{e.exports=require("https")},1428:e=>{e.exports=import("axios")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},6084:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>c,routeModule:()=>u});var a=r(9947),o=r(325),s=r(6762),l=r(9410),n=e([l]);l=(n.then?(await n)():n)[0];let c=(0,s.M)(l,"default"),g=(0,s.M)(l,"config"),u=new a.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/categories-with-articles",pathname:"/api/categories-with-articles",bundlePath:"",filename:""},userland:l});i()}catch(e){i(e)}})},9410:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{default:()=>s});var a=r(1428);r(5591);var o=e([a]);a=(o.then?(await o)():o)[0];let l="https://eennback-002-site1.atempurl.com",n=a.default.create({timeout:1e4,httpsAgent:void 0});async function s(e,t){let{categoryId:r,excludeId:i}=e.query;console.log("Categories with articles API - categoryId:",r),console.log("Categories with articles API - excludeId:",i);try{let e;if(r){e=`${l}/api/Categories/${r}/with-articles`,console.log("Categories with articles API - Fetching single category from:",e);let a=(await n.get(e)).data;console.log("Categories with articles API - Received category:",a.name),console.log("Categories with articles API - Articles in category:",a.articles?.length||0);let o=a.articles?.filter(e=>e.isPublished)||[];o.sort((e,t)=>new Date(t.createdDate).getTime()-new Date(e.createdDate).getTime()),i&&(o=o.filter(e=>e.id!==i)),console.log("Categories with articles API - Final articles count:",o.length),t.status(200).json(o)}else{e=`${l}/api/Categories/with-articles`,console.log("Categories with articles API - Fetching all categories from:",e);let r=(await n.get(e)).data;console.log("Categories with articles API - Received categories:",r.length);let i=r.map(e=>{let t=e.articles?.filter(e=>e.isPublished)||[];return t.sort((e,t)=>new Date(t.createdDate).getTime()-new Date(e.createdDate).getTime()),{...e,articles:t}});t.status(200).json(i)}}catch(e){console.error("Error fetching categories with articles:",e),a.default.isAxiosError(e)&&(console.error("Axios error details:",e.response?.data),console.error("Axios error status:",e.response?.status)),t.status(500).json({error:"Failed to fetch categories with articles"})}}i()}catch(e){i(e)}})},325:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,t,r)=>{e.exports=r(5600)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=6084);module.exports=r})();