(()=>{var e={};e.id=292,e.ids=[292],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},3119:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=r(260),a=r(8203),l=r(5155),i=r.n(l),o=r(7292),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let c=["",{children:["articles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4499)),"D:\\Projects\\0 2023\\0 eunewsonline\\0 FullProj\\41Host\\frontend\\src\\app\\articles\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"D:\\Projects\\0 2023\\0 eunewsonline\\0 FullProj\\41Host\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Projects\\0 2023\\0 eunewsonline\\0 FullProj\\41Host\\frontend\\src\\app\\articles\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/articles/page",pathname:"/articles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},859:(e,t,r)=>{Promise.resolve().then(r.bind(r,1924))},4003:(e,t,r)=>{Promise.resolve().then(r.bind(r,4744))},5798:(e,t,r)=>{"use strict";r.d(t,{As:()=>l,Lh:()=>s,VG:()=>a});let s=e=>{if(!e)return"";e.startsWith("http://")||e.startsWith("https://")||(e=`https://eennback-002-site1.atempurl.com${e.startsWith("/")?"":"/"}${e}`);try{let t=new URL(e);return t.pathname=t.pathname.replace(/ /g,"%20"),t.toString()}catch(t){return console.error("Failed to encode URL:",e,t),e.replace(/ /g,"%20")}},a=e=>e?/^https?:\/\//.test(e)?s(e):s(`https://eennback-002-site1.atempurl.com${e.startsWith("/")?"":"/"}${e}`):void 0,l=e=>{let t;if(console.log("=== NORMALIZING IMAGE PATH ==="),console.log("Input imagePath:",e),!e)return console.log("Empty imagePath, returning empty string"),"";if(e.startsWith("http://")||e.startsWith("https://")){console.log("Already full URL, encoding and returning:",e);let t=s(e);return console.log("Encoded URL:",t),t}let r="https://eennback-002-site1.atempurl.com";console.log("Backend URL from env:",r),e.startsWith("/uploads")||e.startsWith("/images")||e.startsWith("/static")?console.log("Backend path detected, constructed result:",t=`${r}${e}`):e.startsWith("/")?console.log("Absolute path detected, constructed result:",t=`${r}${e}`):console.log("Relative path detected, constructed result:",t=`${r}/${e}`);let a=s(t);return console.log("Final encoded result:",a),a}},362:(e,t,r)=>{"use strict";r.d(t,{dm:()=>a,e9:()=>s});let s=e=>e.toLowerCase().replace(/[^\u0600-\u06FF\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),a=(e,t)=>{let r=e.id;if(t){let e=t.categorySlug||s(t.name);return`/${e}/${r}`}return`/article/${e.id}`}},6465:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(5512),a=r(8531),l=r.n(a),i=r(362),o=r(9496),n=r(3421),c=r(8608);let d=({article:e,variant:t="default",showImage:r=!0,onArticleClick:a,category:d})=>{let m=(0,n.UX)(e.createdDate,!1),h=()=>{a&&a()},u=()=>{if(d){let t=d.categorySlug||(0,i.e9)(d.name),r=e.id;return`/${t}/${r}`}return`/article/${e.id}`};return"dropdown"===t?(0,s.jsxs)(l(),{href:u(),className:"block px-2 py-2 hover:bg-gray-100 rounded text-sm",onClick:h,children:[(0,s.jsx)("div",{className:"font-medium line-clamp-2 text-right",children:e.articleTitle}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdDate).toLocaleDateString("en-US")})]}):"compact"===t?(0,s.jsx)(l(),{href:u(),className:"block",onClick:h,children:(0,s.jsxs)("div",{className:"flex gap-3 p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow hover:bg-gray-50",children:[r&&e.imagePath&&""!==e.imagePath.trim()&&(0,s.jsx)("div",{className:"w-16 h-16 flex-shrink-0 relative overflow-hidden rounded",children:(0,s.jsx)(o.A,{src:e.imagePath,alt:e.articleTitle,className:"w-full h-full object-cover",fallbackElement:(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"لا توجد صورة"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm text-right line-clamp-2 mb-1 hover:text-blue-600 transition-colors",children:e.articleTitle}),(0,s.jsxs)("div",{className:"flex items-center gap-1 justify-end",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdDate).toLocaleDateString("en-US")}),(0,s.jsx)(c.YmN,{className:"text-gray-500 text-xs"})]})]})]})}):(0,s.jsx)(l(),{href:u(),onClick:h,className:"block",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow group",children:[r&&e.imagePath&&""!==e.imagePath.trim()&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"h-48 overflow-hidden relative",children:[(0,s.jsx)(o.A,{src:e.imagePath,alt:e.articleTitle,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",fallbackElement:(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-500",children:"لا توجد صورة"})})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/35 via-transparent to-transparent z-10"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 z-20",children:(0,s.jsx)("h2",{className:"text-lg font-bold text-right line-clamp-2 text-white article-title-shadow",children:e.articleTitle})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("p",{className:"text-gray-600 text-right line-clamp-2 mb-2 text-sm",children:e.articleSummary}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:m})]})]}),(!r||!e.imagePath||""===e.imagePath.trim())&&(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-right line-clamp-2",children:e.articleTitle}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 text-right line-clamp-3",children:e.articleSummary}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:m})]})]})})}},9496:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(5512),a=r(8009),l=r(5103),i=r(5798);let o=({src:e,alt:t,className:r="",fallbackElement:o})=>{let[n,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!0),h=e&&e.trim()&&!n,u=h?(0,i.As)(e.trim()):"",p=(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-white text-center p-8",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCF0"}),(0,s.jsx)("p",{className:"text-lg",children:"مقال مميز جيد"})]})});return h?(console.log("=== RENDERING IMAGE ==="),console.log("Using normalized src:",u),console.log("hasValidSrc:",h),console.log("imageError:",n),console.log("imageLoading:",d),(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(d||n)&&(0,s.jsx)("div",{className:"absolute inset-0 z-10",children:o||p}),!n&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.default,{src:u,alt:t,className:`${r} absolute inset-0 w-full h-full object-cover ${d?"opacity-0":"opacity-100"} transition-opacity duration-300 z-20`,fill:!0,sizes:"100vw",onError:t=>{console.error("=== IMAGE LOADING ERROR ==="),console.error("Original src:",e),console.error("Normalized path:",u),console.error("Backend URL from env:","https://eennback-002-site1.atempurl.com"),console.error("hasValidSrc:",h),console.error("Type of src:",typeof e),console.error("Error event:",t),console.error("================================"),c(!0),m(!1)},onLoad:()=>{console.log("=== IMAGE LOADED SUCCESSFULLY ==="),console.log("Loaded image:",u),m(!1)},unoptimized:!0})})]})):(console.log("ArticleImage: Showing fallback due to invalid src"),o||p)}},4744:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(5512),a=r(8009),l=r(6465);let i=({categoryId:e,excludeId:t,limit:r,variant:i="default",showImage:o=!0,onArticleClick:n,className:c=""})=>{let[d,m]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),x=e??void 0,f=t??void 0,v=r??void 0;return((0,a.useEffect)(()=>{(async()=>{try{if(u(!0),g(null),x)try{console.log("ArticlesList - Trying categories-with-articles endpoint for categoryId:",x);let e="/api/categories-with-articles",t=new URLSearchParams;t.append("categoryId",x.toString()),f&&t.append("excludeId",f),e+=`?${t.toString()}`;let r=await fetch(e);if(r.ok){let e=await r.json();console.log("ArticlesList - Success with categories-with-articles:",e.length);let t=v?e.slice(0,v):e;m(t);return}console.log("ArticlesList - Categories-with-articles failed, falling back to regular articles API")}catch(e){console.log("ArticlesList - Categories-with-articles error, falling back:",e)}let e="/api/articles",t=new URLSearchParams;x&&t.append("categoryId",x.toString()),f&&t.append("excludeId",f),t.toString()&&(e+=`?${t.toString()}`),console.log("ArticlesList - Fetching from fallback:",e);let r=await fetch(e);if(!r.ok)throw Error("Failed to fetch articles");let s=await r.json();f&&!x&&(s=s.filter(e=>e.id!==f)),console.log("ArticlesList - Received articles:",s.length);let a=v?s.slice(0,v):s;console.log("ArticlesList - After limit:",a.length),m(a)}catch(e){console.error("Failed to fetch articles",e),g("فشل في تحميل المقالات")}finally{u(!1)}})()},[x,f,v]),h)?(0,s.jsx)("div",{className:`text-center py-4 ${c}`,children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"جاري التحميل..."})}):p?(0,s.jsx)("div",{className:`text-center py-4 ${c}`,children:(0,s.jsx)("div",{className:"text-sm text-red-500",children:p})}):0===d.length?(0,s.jsxs)("div",{className:`text-center py-4 ${c}`,children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:x?"لا توجد مقالات في هذا القسم":"لا توجد مقالات"}),x&&(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"جاري البحث عن مقالات أخرى..."})]}):"dropdown"===i?(0,s.jsx)("div",{className:c,children:d.map(e=>(0,s.jsx)(l.A,{article:e,variant:"dropdown",showImage:o,onArticleClick:n},e.id))}):"compact"===i?(0,s.jsx)("div",{className:`space-y-3 ${c}`,children:d.map(e=>(0,s.jsx)(l.A,{article:e,variant:"compact",showImage:o,onArticleClick:n},e.id))}):(0,s.jsx)("div",{className:`grid gap-6 md:grid-cols-2 lg:grid-cols-3 ${c}`,children:d.map(e=>(0,s.jsx)(l.A,{article:e,variant:"default",showImage:o,onArticleClick:n},e.id))})}},4499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(2740),a=r(1924);let l=()=>(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-right",children:"جميع المقالات"}),(0,s.jsx)(a.default,{variant:"default",showImage:!0})]})},1924:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\0 2023\\\\0 eunewsonline\\\\0 FullProj\\\\41Host\\\\frontend\\\\src\\\\components\\\\ArticlesList.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\0 2023\\0 eunewsonline\\0 FullProj\\41Host\\frontend\\src\\components\\ArticlesList.tsx","default")},440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(8077);let a=async e=>[{type:"image/x-icon",sizes:"850x874",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,798,77,608,810],()=>r(3119));module.exports=s})();