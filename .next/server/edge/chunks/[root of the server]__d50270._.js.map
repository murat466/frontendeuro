{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  const { pathname } = request.nextUrl;\r\n\r\n  // Handle old article URLs: /article/[id]\r\n  if (pathname.startsWith('/article/')) {\r\n    const articleId = pathname.split('/')[2];\r\n    \r\n    if (articleId) {\r\n      try {\r\n        // Fetch article data to get the category and title for proper URL generation\r\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'https://eennback-002-site1.atempurl.com';\r\n        \r\n        // Create a simple fetch request to get article data\r\n        const response = await fetch(`${apiUrl}/api/Articles/${articleId}`, {\r\n          // Add headers for development HTTPS\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const article = await response.json();\r\n          \r\n          // Fetch categories to get category slug\r\n          const categoriesResponse = await fetch(`${apiUrl}/api/Categories`, {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n\r\n          if (categoriesResponse.ok) {\r\n            const categories = await categoriesResponse.json();\r\n            const category = categories.find((c: { id: number; name: string; categorySlug?: string }) => c.id === article.categoryId);\r\n            \r\n            if (category) {\r\n              // Create slug from article title\r\n              const createSlug = (text: string): string => {\r\n                return text\r\n                  .toLowerCase()\r\n                  .replace(/[^\\u0600-\\u06FF\\w\\s-]/g, '')\r\n                  .replace(/\\s+/g, '-')\r\n                  .replace(/-+/g, '-')\r\n                  .trim();\r\n              };\r\n\r\n              const categorySlug = category.categorySlug || createSlug(category.name);\r\n              const articleSlug = article.id; // Simplified: just use the ID\r\n              const newUrl = `/${categorySlug}/${articleSlug}`;\r\n              \r\n              // Redirect to new URL format\r\n              return NextResponse.redirect(new URL(newUrl, request.url));\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error in middleware redirect:', error);\r\n        // If there's an error, let the request continue to the original route\r\n      }\r\n    }\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    // Match article routes but exclude API routes and static files\r\n    '/article/:path*',\r\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAGO,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,yCAAyC;IACzC,IAAI,SAAS,UAAU,CAAC,cAAc;QACpC,MAAM,YAAY,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;QAExC,IAAI,WAAW;YACb,IAAI;gBACF,6EAA6E;gBAC7E,MAAM,SAAS,+EAAmC;gBAElD,oDAAoD;gBACpD,MAAM,WAAW,MAAM,MAAM,GAAG,OAAO,cAAc,EAAE,WAAW,EAAE;oBAClE,oCAAoC;oBACpC,SAAS;wBACP,gBAAgB;oBAClB;gBACF;gBAEA,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,UAAU,MAAM,SAAS,IAAI;oBAEnC,wCAAwC;oBACxC,MAAM,qBAAqB,MAAM,MAAM,GAAG,OAAO,eAAe,CAAC,EAAE;wBACjE,SAAS;4BACP,gBAAgB;wBAClB;oBACF;oBAEA,IAAI,mBAAmB,EAAE,EAAE;wBACzB,MAAM,aAAa,MAAM,mBAAmB,IAAI;wBAChD,MAAM,WAAW,WAAW,IAAI,CAAC,CAAC,IAA2D,EAAE,EAAE,KAAK,QAAQ,UAAU;wBAExH,IAAI,UAAU;4BACZ,iCAAiC;4BACjC,MAAM,aAAa,CAAC;gCAClB,OAAO,KACJ,WAAW,GACX,OAAO,CAAC,0BAA0B,IAClC,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,OAAO,KACf,IAAI;4BACT;4BAEA,MAAM,eAAe,SAAS,YAAY,IAAI,WAAW,SAAS,IAAI;4BACtE,MAAM,cAAc,QAAQ,EAAE,EAAE,8BAA8B;4BAC9D,MAAM,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,EAAE,aAAa;4BAEhD,6BAA6B;4BAC7B,OAAO,qLAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,QAAQ,QAAQ,GAAG;wBAC1D;oBACF;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,sEAAsE;YACxE;QACF;IACF;IAEA,OAAO,qLAAA,CAAA,eAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,+DAA+D;QAC/D;QACA;KACD;AACH"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}